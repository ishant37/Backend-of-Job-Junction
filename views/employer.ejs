<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cholot Community</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="employer.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
  <style>
    /* Modal styles */
    .modal {
      display: none;
      /* Hidden by default */
      position: fixed;
      /* Stay in place */
      z-index: 1;
      /* Sit on top */
      left: 0;
      top: 0;
      width: 100%;
      /* Full width */
      height: 100%;
      /* Full height */
      overflow: auto;
      /* Enable scroll if needed */
      background-color: rgb(0, 0, 0);
      /* Fallback color */
      background-color: rgba(0, 0, 0, 0.4);
      /* Black w/ opacity */
    }

    .modal-content {
      background-color: #fefefe;
      margin: 15% auto;
      /* 15% from the top and centered */
      padding: 20px;
      border: 1px solid #888;
      width: 80%;
      /* Could be more or less, depending on screen size */
    }
  </style>
</head>

<body>

  <!-- Navbar -->
  <div class="navbar">
    <div class="logo">Job Junction</div>
    <div class="menu">
      <a href="home2.html"> HOME </a>
      <a loading="lazy" href="learning.html"> LEARNING </a>
      <a href="counsiling.html"> GUIDANCE </a>
      <a href="#"> AI RESUME BUILDER </a>
      <i class="fas fa-bell"></i>
      <div class="icon-container">
        <i class="fas fa-user" id="formIcon"></i>
        <div class="dropdown-menu">
          <a href="Profile.html">Your Profile</a>
          <a href="Dashboard.html">Dashboard</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Hero Section -->
  <header class="hero-section text-center">
    <div class="container">
      <h1>Discover the best community that fits your needs.</h1>
      <p class="lead">Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi.</p>
      <a href="#" class="btn btn-outline-light btn-lg animate__animated animate__pulse">View More</a>
    </div>
  </header>

  <!-- Active Job Options Section -->
  <button id="postJobBtn" class="btn btn-success mt-4 animate__animated animate__fadeInUp btn-lg btn-block">
    Post a Job
  </button>
  <section class="active-jobs container">
    <h2 class="text-center">Active Job Options</h2>
    <div class="row">
      <div class="col-md-4">
        <div class="card animate__animated animate__fadeInLeft">
          <div class="card-body">
            <h5 class="card-title">Software Developer</h5>
            <p>Posted on: 21st September 2024</p>
            <p>Scheduled for: 25th September 2024, 10:00 AM</p>
            <a href="#" class="btn btn-primary">View Details</a>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card animate__animated animate__fadeInUp">
          <div class="card-body">
            <h5 class="card-title">Software Developer</h5>
            <p>Posted on: 21st September 2024</p>
            <p>Scheduled for: 25th September 2024, 10:00 AM</p>
            <a href="#" class="btn btn-primary">View Details</a>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <div class="card animate__animated animate__fadeInRight">
          <div class="card-body">
            <h5 class="card-title">Marketing Executive</h5>
            <p>Posted on: 20th September 2024</p>
            <p>Scheduled for: 24th September 2024, 9:00 AM</p>
            <a href="#" class="btn btn-primary">View Details</a>
          </div>
        </div>
      </div>
    </div>

    <!-- Job Posts Section -->
    <section class="active-jobs container">
      <div class="row mt-5" id="jobPosts">
        <!-- Job posts will appear here -->
      </div>
    </section>

    <!-- Progress Bars Section -->
    <section class="progress-section container" id="jobPosts">
      <h2 class="text-center mt-5">Job Posting Progress</h2>
      <div class="row">
        <div class="col-md-4">
          <h5>Software Developer</h5>
          <div class="progress">
            <div class="progress-bar bg-success" role="progressbar" style="width: 75%" aria-valuenow="75"
              aria-valuemin="0" aria-valuemax="100">75%</div>
          </div>
        </div>
        <div class="col-md-4">
          <h5>Marketing Executive</h5>
          <div class="progress">
            <div class="progress-bar bg-info" role="progressbar" style="width: 50%" aria-valuenow="50" aria-valuemin="0"
              aria-valuemax="100">50%</div>
          </div>
        </div>
        <div class="col-md-4">
          <h5>AI Specialist</h5>
          <div class="progress">
            <div class="progress-bar bg-warning" role="progressbar" style="width: 40%" aria-valuenow="40"
              aria-valuemin="0" aria-valuemax="100">40%</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Job Posting History -->
    <section class="job-history container mt-5">
      <h2 class="text-center">Job Posting History</h2>
      <div class="list-group">
        <a href="#" class="list-group-item list-group-item-action">Software Developer - Posted on 21st September
          2024</a>
        <a href="#" class="list-group-item list-group-item-action">Marketing Executive - Posted on 20th September
          2024</a>
        <a href="#" class="list-group-item list-group-item-action">AI Specialist - Posted on 19th September 2024</a>
      </div>
    </section>

    <!-- The Modal -->
    <div id="postJobModal" class="modal">
      <div class="modal-content" style="height: 600px; overflow-y: auto;">
        <span class="close">&times;</span>
        <h2>Post a Job</h2>
        <form id="jobForm" method="post" action="/employer">
          <div class="mb-3">
            <label for="company" class="form-label">Company</label>
            <input type="text" class="form-control" id="company" required>
          </div>
          <div class="mb-3">
            <label for="jobTitle" class="form-label">Title</label>
            <input type="text" class="form-control" id="jobTitle" required>
          </div>
          <div class="mb-3">
            <label for="sector" class="form-label">Sector</label>
            <input type="text" class="form-control" id="sector" required>
          </div>
          <div class="mb-3">
            <label for="location" class="form-label">location</label>
            <input type="text" class="form-control" id="location" required>
          </div>

          <div class="mb-3">
            <label for="Experience" class="form-label">Experience</label>
            <input type="number" class="form-control" id="Experience"  required>
          </div>
          <div class="mb-3">
            <label for="salary" class="form-label">Salary per annum</label>
            <input type="text" class="form-control" id="salary" required>
          </div>
          <div class="mb-3">
            <label for="description" class="form-label">description</label>
            <input type="text" class="form-control" id="description" required>
          </div>   
          <div class="mb-3">
            <label for="postDate" class="form-label">Post Date</label>
            <input type="date" class="form-control" id="postDate">
          </div>
          <div class="mb-3">
            <label for="scheduleTime" class="form-label">Scheduled Time</label>
            <input type="datetime-local" class="form-control" id="scheduleTime">
          </div>

          <button type="submit" class="btn btn-primary">Submit</button>
        </form>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // Get modal elements
      var modal = document.getElementById("postJobModal");
      var btn = document.getElementById("postJobBtn");
      var span = document.getElementsByClassName("close")[0];

      // Open modal
      btn.onclick = function () {
        modal.style.display = "block";
      }

      // Close modal
      span.onclick = function () {
        modal.style.display = "none";
      }

      // Close modal when clicking outside of it
      window.onclick = function (event) {
        if (event.target == modal) {
          modal.style.display = "none";
        }
      }

      // Handle form submission
      document.getElementById("jobForm").onsubmit = function (e) {
  e.preventDefault();

  var company = document.getElementById("company").value;
  var title = document.getElementById("jobTitle").value;
  var salary = document.getElementById("salary").value;
  var postDate = document.getElementById("postDate").value;
  var scheduleTime = document.getElementById("scheduleTime").value;

  var jobPostsContainer = document.getElementById("jobPosts");
  var jobPostHtml = `
    <div class="col-md-4">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">${title}</h5>
          <p>Company: ${company}</p>
          <p>Salary: $${salary}</p>
          <p>Posted on: ${postDate}</p>
          <p>Scheduled for: ${scheduleTime}</p>
          <a href="#" class="btn btn-primary">View Details</a>
        </div>
      </div>
    </div>`;

  // Use insertAdjacentHTML instead of innerHTML to avoid overwriting content
  jobPostsContainer.insertAdjacentHTML('beforeend', jobPostHtml);

  // Optional: Clear form fields after posting
  document.getElementById("jobForm").reset();
};



      // Handle form submission
document.getElementById("jobForm").onsubmit = async function (e) {
  e.preventDefault();

  const jobData = {
    company: document.getElementById("company").value,
    title: document.getElementById("jobTitle").value,
    sector: document.getElementById("sector").value,
    location: document.getElementById("location").value,
    experience: document.getElementById("Experience").value,
    salary: document.getElementById("salary").value,
    description: document.getElementById("description").value,
 // Ensure you have this input
  };

  try {
    const response = await fetch('/employer', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(jobData)
    });

    if (response.ok) {
      const savedJob = await response.json();
      console.log('Job posted successfully:', savedJob);
      // Optionally update the UI or show a success message
    } else {
      console.error('Error posting job:', await response.json());
    }
  } catch (error) {
    console.error('Fetch error:', error);
  }

  // Reset form and close modal (if necessary)
  document.getElementById("jobForm").reset();
  modal.style.display = "none"; // Adjust modal handling as needed
}

    </script>
</body>

</html>